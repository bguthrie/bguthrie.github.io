{{ define "main" }}
<div class="max-w-7xl mx-auto px-4 py-8">
  <div class="grid grid-cols-1 lg:grid-cols-[240px_1fr] xl:grid-cols-[240px_1fr_240px] gap-8">

    {{/* Left sidebar - identity */}}
    {{ partial "sidebar.html" . }}

    {{/* Main content */}}
    <article class="min-w-0">
      {{/* Hero image */}}
      {{ with .Params.image }}
        <figure class="mb-8 relative">
          <img
            src="{{ . }}"
            alt="{{ $.Title }}"
            class="w-full rounded-lg object-cover max-h-96"
          >
          {{ with $.Params.image_credit }}
            <figcaption class="absolute -bottom-6 right-2 text-xs text-gray-400 dark:text-gray-400">
              {{- if $.Params.image_credit_url -}}
                <a href="{{ $.Params.image_credit_url }}" class="hover:underline" target="_blank" rel="noopener">{{ . }}</a>
              {{- else -}}
                {{ . }}
              {{- end -}}
            </figcaption>
          {{ end }}
        </figure>
      {{ end }}

      <header class="mb-8">
        <h1 class="text-3xl md:text-4xl font-bold font-sans mb-4">
          {{ .Title }}
          {{ if .Draft }}
              <span class="text-xs bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300 px-2 py-1 rounded-sm ml-2 font-sans font-normal align-middle">Draft</span>
          {{ end }}
          {{ if .Params.hidden }}
              <span class="text-xs bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 px-2 py-1 rounded-sm ml-2 font-sans font-normal align-middle">Unpublished</span>
          {{ end }}
        </h1>
        <div class="text-sm text-gray-600 dark:text-gray-400 font-sans">
          <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
          {{ with .ReadingTime }}
              <span class="mx-2">&middot;</span>
              <span>{{ . }} min read</span>
          {{ end }}
        </div>
      </header>


      {{/* Article body */}}
      <div class="prose prose-lg prose-p:text-xl prose-gray dark:prose-invert max-w-none font-serif
                  prose-p:leading-relaxed prose-li:text-xl
                  prose-headings:font-sans prose-headings:font-bold prose-headings:text-md
                  prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-a:no-underline prose-a:hover:underline
                  prose-code:before:content-none prose-code:after:content-none">
        {{ .Content }}
      </div>
    </article>

    {{/* Right sidebar - TOC */}}
    {{ partial "toc.html" . }}

  </div>
</div>
{{ end }}
